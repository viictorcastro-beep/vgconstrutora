<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>Teste Login Firebase</title>
  <style>
    body { font-family: system-ui; max-width: 600px; margin: 50px auto; padding: 20px; }
    button { padding: 15px 30px; font-size: 16px; cursor: pointer; }
    #log { margin-top: 20px; padding: 10px; background: #f0f0f0; white-space: pre-wrap; font-family: monospace; font-size: 12px; }
  </style>
</head>
<body>
  <h1>ðŸ”¥ Teste de Login Firebase</h1>
  <button id="login-btn">Entrar com Google</button>
  <div id="log"></div>

  <script type="module">
    const log = (msg) => {
      console.log(msg);
      document.getElementById('log').textContent += msg + '\n';
    };

    log('1. Script carregou!');

    try {
      log('2. Importando Firebase...');
      
      const { initializeApp } = await import("https://www.gstatic.com/firebasejs/9.22.1/firebase-app.js");
      log('3. Firebase App importado âœ“');
      
      const { getAuth, GoogleAuthProvider, signInWithPopup, onAuthStateChanged } = await import("https://www.gstatic.com/firebasejs/9.22.1/firebase-auth.js");
      log('4. Firebase Auth importado âœ“');

      const firebaseConfig = {
        apiKey: "AIzaSyCOrMx8Hv2qRkoIBwBBVq4V2DONUa7T0lU",
        authDomain: "qd20-lt2-a-b.firebaseapp.com",
        projectId: "qd20-lt2-a-b",
        storageBucket: "qd20-lt2-a-b.firebasestorage.app",
        messagingSenderId: "648174167866",
        appId: "1:648174167866:web:98fb10be18b73fcc7a9203"
      };

      const app = initializeApp(firebaseConfig);
      log('5. Firebase inicializado âœ“');
      
      const auth = getAuth(app);
      const provider = new GoogleAuthProvider();
      log('6. Auth configurado âœ“');
      log('7. DomÃ­nio atual: ' + window.location.hostname);

      document.getElementById('login-btn').onclick = async () => {
        log('8. BotÃ£o clicado! Tentando login...');
        try {
          const result = await signInWithPopup(auth, provider);
          log('9. âœ“ LOGIN OK: ' + result.user.email);
          alert('Login bem-sucedido: ' + result.user.email);
        } catch (err) {
          log('9. âœ— ERRO: ' + err.code);
          log('   Mensagem: ' + err.message);
          alert('Erro: ' + err.code + '\n' + err.message);
        }
      };

      onAuthStateChanged(auth, (user) => {
        if (user) {
          log('10. UsuÃ¡rio logado: ' + user.email);
        } else {
          log('10. Nenhum usuÃ¡rio logado');
        }
      });

      log('âœ“ Tudo pronto! Clique no botÃ£o.');

    } catch (err) {
      log('âœ— ERRO FATAL: ' + err.message);
      alert('Erro ao carregar Firebase: ' + err.message);
    }
  </script>
</body>
</html>
